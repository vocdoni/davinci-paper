% !TeX root = main.tex

% Doc sytle
\setcounter{secnumdepth}{3} %enumerate sections up to depth 3 (subsubsection)
% Set the first-level itemize label to use math mode \bullet
\setlist[itemize,1]{label=$\bullet$}

% Working directory
\newcommand{\definedir}[2]{\newcommand{#1}{#2}}
\definedir{\secs}{../sections}
\definedir{\figs}{../figures}
\definedir{\bib}{../bibliography}

% Comments
\newcommand{\marta}[1]{\todo[size=\small, color=red!40]{\textbf{Marta}: #1}}
\newcommand{\martai}[1]{\todo[inline, size=\small, color=red!40]{\textbf{Marta}: #1}}
\newcommand{\pau}[1]{\todo[size=\small, color=blue!40]{\textbf{Pau}: #1}}
\newcommand{\paui}[1]{\todo[inline, size=\small, color=blue!40]{\textbf{Pau}: #1}}
\newcommand{\jordi}[1]{\todo[size=\small, color=green!40]{\textbf{Jordi}: #1}}
\newcommand{\jordii}[1]{\todo[inline, size=\small, color=green!40]{\textbf{Jordi}: #1}}

% Freefootnote
\let\svthefootnote\thefootnote
\newcommand\freefootnote[1]{%
	\let\thefootnote\relax%
	\footnotetext{#1}%
	\let\thefootnote\svthefootnote%
}

% Table of contents style
% Make section entries bold in ToC
\makeatletter
\renewcommand{\@dotsep}{4.5}
\renewcommand{\l@section}[2]{\addpenalty{\@secpenalty}
	\addvspace{1.0em plus 1pt}
	\@tempdima=1.5em
	\parindent \z@ \rightskip \@pnumwidth
	\parfillskip -\@pnumwidth
	{\leavevmode
		\advance\leftskip\@tempdima
		\hskip -\leftskip
		\bfseries #1\hfil \hbox to\@pnumwidth{\hss #2}}\par}
\makeatother

% Colours
\definecolor{cred}{rgb}{1, 0.5, 0.5}
\definecolor{cgreen}{rgb}{0.5, 1, 0.5}
\definecolor{cblue}{rgb}{0.5, 0.5, 1}

% Hyperref setup
%\hypersetup{
%	final=true,
%	colorlinks=true,
%	linkcolor=cblue,
%	urlcolor=black,
%	citecolor=cblue,
%}

% Mathbb
\newcommand{\N}{\ensuremath{\mathbb{N}}\xspace}
\newcommand{\Z}{\ensuremath{\mathbb{Z}}\xspace}
\newcommand{\G}{\ensuremath{\mathbb{G}}\xspace}
\newcommand{\F}{\ensuremath{\mathbb{F}}\xspace}
\newcommand{\J}{\ensuremath{\mathbb{J}}\xspace}

% Elliptic curves
\newcommand{\BW}[1]{\ensuremath{{#1}^{\text{\tiny \sf BW}}}\xspace}
\newcommand{\BLS}[1]{\ensuremath{{#1}^{\text{\tiny \sf BLS}}}\xspace}
\newcommand{\BN}[1]{\ensuremath{{#1}^{\text{\tiny \sf BN}}}\xspace}

% Circuits
\newcommand{\public}{{\sf\color{teal}public}\xspace}
\newcommand{\private}{{\sf\color{red}private}\xspace}

% Ballot protocol
\newcommand{\ballotstyle}[1]{\texttt{#1}\xspace}
\newcommand{\maxcount}{\ballotstyle{maxCount}}
\newcommand{\maxvalue}{\ballotstyle{maxValue}}
\newcommand{\minvalue}{\ballotstyle{minValue}}
\newcommand{\uniquevalues}{\ballotstyle{uniqueValues}}
\newcommand{\maxtotalcost}{\ballotstyle{maxTotalCost}}
\newcommand{\mintotalcost}{\ballotstyle{minTotalCost}}
\newcommand{\costexponent}{\ballotstyle{costExponent}}

% Voting protocol
\newcommand{\variablestyle}[1]{\texttt{#1}\xspace}
\newcommand{\vote}{\variablestyle{vote}}
\newcommand{\processid}{\variablestyle{processID}}
\newcommand{\censuspf}{\variablestyle{censusProof}}
\newcommand{\commitment}{\variablestyle{identityCommitment}}
\newcommand{\nullifier}{\variablestyle{nullifier}}
\newcommand{\encryptedballot}{\variablestyle{encryptedBallot}}
\newcommand{\zkproof}{\variablestyle{ZKproof}}
\newcommand{\signature}{\variablestyle{signature}}
\newcommand{\address}{\variablestyle{address}}

% State Merkle tree
\newcommand{\censusroot}{\variablestyle{censusRoot}}
\newcommand{\type}{\variablestyle{type}}
\newcommand{\ballotmode}{\variablestyle{ballotMode}}
\newcommand{\epk}{\variablestyle{encryptionKey}}
\newcommand{\addaccumulator}{\variablestyle{addedResultsAccumulator}}
\newcommand{\substractaccumulator}{\variablestyle{substractResultsAccumulator}}
\newcommand{\addresses}{\variablestyle{addresses}}
\newcommand{\nullifiers}{\variablestyle{nullifiers}}
\newcommand{\weight}{\variablestyle{weight}}

% Others
\newcommand{\noi}{\noindent}
\newcommand{\conc}{\:||\:}

% Hyperlinks
\newcommand{\hlset}[1]{\hypertarget{\detokenize{#1}}{#1}}
\newcommand{\hlget}[1]{\hyperlink{\detokenize{#1}}{#1}}

% Cryptographic primitives
\newcommand{\methodstyle}[1]{{\sf{#1}}\xspace}
\newcommand{\Hash}{\methodstyle{Hash}}
\newcommand{\Enc}{\methodstyle{Enc}}
\newcommand{\Dec}{\methodstyle{Dec}}
\newcommand{\GenerateShares}{\methodstyle{GenerateShares}}
\newcommand{\VerifyShare}{\methodstyle{VerifyShare}}
\newcommand{\DerivePublicKey}{\methodstyle{DerivePublicKey}}
\newcommand{\DeriveSecretShare}{\methodstyle{DeriveSecretShare}}

\newcommand{\blinder}[1][]{{\sf{blinder}^{#1}}}
\newcommand{\pk}[1][]{{\sf{pk}^{#1}}}
\newcommand{\sk}[1][]{{\sf{sk}^{#1}}} 
\newcommand{\msg}[1][]{{\sf{message}^{#1}}}
\newcommand{\enc}[1][]{{\sf{ciphertext}^{#1}}}
\newcommand{\sample}{\xleftarrow{\$}}

% VOC token
\newcommand{\token}{VOC\xspace}
\newcommand{\vocstyle}[1]{{\sf{#1}}\xspace}
\newcommand{\baseCost}{\vocstyle{baseCost}}
\newcommand{\capacityCost}{\vocstyle{capacityCost}}
\newcommand{\durationCost}{\vocstyle{durationCost}}
\newcommand{\fixedCost}{\vocstyle{fixedCost}}
\newcommand{\maxVotes}{\vocstyle{maxVotes}}
\newcommand{\maxDuration}{\vocstyle{maxDuration}}
\newcommand{\numSequencers}{\vocstyle{numSequencers}}
\newcommand{\processDuration}{\vocstyle{processDuration}}
\newcommand{\reimbursement}{\vocstyle{reimbursement}}
\newcommand{\securityCost}{\vocstyle{securityCost}}
\newcommand{\sequencerReward}{\vocstyle{sequencerReward}}
\newcommand{\slashedAmount}{\vocstyle{slashedAmount}}
\newcommand{\stakedCollateral}{\vocstyle{stakedCollateral}}
\newcommand{\totalCost}{\vocstyle{totalCost}}
\newcommand{\totalReward}{\vocstyle{totalReward}}
\newcommand{\totalRewrites}{\vocstyle{totalRewrites}}
\newcommand{\totalSequencers}{\vocstyle{totalSequencers}}
\newcommand{\totalVotingProcesses}{\vocstyle{totalVotingProcesses}}
\newcommand{\usedSequencers}{\vocstyle{usedSequencers}}
\newcommand{\votes}{\vocstyle{votes}}
\newcommand{\voteRewrites}{\vocstyle{voteRewrites}}

% Misc
\newcommand{\davinci}{DAVINCI\xspace}
\newcommand{\Davinci}{DAVINCI\xspace}

% Draft watermark
%\ifdraft{\SetWatermarkScale{4}}{\SetWatermarkScale{0}}

% New foonote referencing a previous footmark
\makeatletter
\newcommand\footnoteref[1]{\protected@xdef\@thefnmark{\ref{#1}}\@footnotemark}
\makeatother